---
# tasks file for mysql
    - name: Check OS Version
      debug: var=ansible_os_family

    - block: #====Block Ubuntu====
      - name: Install mySQL on Ubuntu
        apt:
          name: "{{ mysql_package_ubuntu }}"
          state: latest
          update_cache: yes

      - name: Launch mySQL Ubuntu
        service:
          name: "{{ mysql_service_ubuntu }}"
          state: started
          enabled: yes

      when: ansible_os_family=="Debian" and ansible_distribution=="Ubuntu"

    - block: #====Block Debian====
      - name: Install mySQL on Debian
        apt:
          name: "{{ mysql_package_debian }}"
          state: latest
          update-cache: yes

      - name: Launch mysql Debian
        service:
          name: "{{ mysql_service_debian }}"
          state: started
          enabled: yes

      when: ansible_os_family=="Debian" and ansible_distribution=="Debian"

    - block: #====Block CentOS====
      - name: Install mySQL on CentOS
        yum:
          name: "{{ mysql_package_centos }}"
          state: latest

      - name: Launch nginx CentOS
        service:
          name: "{{ mysql_service_centos }}"
          state: started
      when: ansible_os_family=="RadHat"
